{% extends 'base1.html' %}


{% block  jq %}

    <script type="text/javascript" src="/static/js/jquery-1.12.4.min.js"></script>

{% endblock jq %}
{% block head %}
    <script >
    $(function () {
    name_ok = true;
    pwd_ok = true;
    $('#change').css({'cursor': 'pointer'}).click(function () {
        $('#yzm_img').prop('src', $('#yzm_img').prop('src') + 1);
    });


    $('.name_input').keyup(function () {

        if ($(this).val() == "") {
            $(this).next().html('用户名不能为空').show();

        }
        else {
            $(this).next().hide()

        }
    });

    $('.name_input').blur(function () {
        var user_name = $('.name_input').val();

        if (user_name.length < 5 || user_name.length > 15) {

            $(this).next().html('请输入5-15位英文或数字').show();
            name_ok = false;
        }
        else {
            name_ok = true;
            $(this).next().hide()
        }

    });
    $('.pass_input').blur(function () {

        var user_pwd = $('.pass_input').val();
        if (user_pwd.length < 6 || user_pwd.length > 15) {
            $(this).next().html('密码最少6位,最多15位').show();
            pwd_ok = false;
        }
        else {
            pwd_ok = true
            $(this).next().hide()

        }
    });

    $('#reg_form').submit(function () {
        $('.name_input').blur();
        $('.pass_input').blur();
        return name_ok && pwd_ok;
    });

{#    var uname = $.cookie('uname');#}
{#    if(uname == undefined){#}
{#        $('.yzm').val('wucookie')#}
{#    }#}
{#    else {#}
{#        $('.yzm').val(uname)#}
{#    }#}
    if ('{{yzm_error}}' == '1') {
        $('.user_error').html('验证码错误').show();
        yzm_error = '0'


    }
    if ('{{name_error}}' == '1' || '{{pwd_error}}' == '1') {
        $('.user_error').html('用户名错误或密码').show();
        name_error = '0'

    }




});
    </script>

{% endblock head %}


{% block body %}

    <div class="login_top clearfix">
        <a href="/" class="login_logo"><img src="/static/images/logo02.png"></a>
    </div>

    <div class="login_form_bg">
        <div class="login_form_wrap clearfix">
            <div class="login_banner fl"></div>
            <div class="slogan fl">日夜兼程 · 急速送达</div>
            <div class="login_form fr">
                <div class="login_title clearfix">
                    <h1>用户登录</h1>
                    <a href="/register/">立即注册</a>
                </div>
                <div class="form_input">
                    <form action="/login_handle/" method="post" id="reg_form">
                        {% csrf_token %}
                        <input type="text" name="user_name" value="{{ uname }}" class="name_input" placeholder="请输入用户名">
                        <div class="user_error">输入错误</div>
                        <input type="password" name="user_pwd" class="pass_input" value="{{ upwd }}" placeholder="请输入密码">
                        <div class="pwd_error">输入错误</div>
                        <div class="more_input clearfix">
                            <input type="checkbox" name="rember" value="1" checked="checked">
                            <label>记住用户名</label>
                            <a href="/change_pwd/">忘记密码</a>
                        </div>
                        <div class="yzm_div">
                            <input type="text" class="yzm" name="yzm" value="">
                            <img src="/verify/?1" alt="" class="yam_img" id="yzm_img">
                            <span class="change_yzm" id="change">看不清换一个</span>
                        </div>
                        <input type="submit"  value="登录" class="input_submit">
                    </form>

                </div>
            </div>
        </div>
    </div>


{% endblock body %}

